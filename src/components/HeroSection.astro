---
interface Props {
  title: string;
  titleAccent?: string;
  subtitle: string;
  badge?: string;
  image: string;
  imageAlt: string;
  video?: string;
  ctaText?: string;
  ctaHref?: string;
  variant?: "fullscreen" | "split";
  splitPosition?: "left" | "right";
}

const {
  title,
  titleAccent,
  subtitle,
  badge = "Asturias, Spain",
  image,
  imageAlt,
  video,
  ctaText = "Reserva ya!",
  ctaHref = "https://www.reservaonline.support/rumbonorte/index.html",
  variant = "fullscreen",
  splitPosition = "left",
} = Astro.props;
---

{
  variant === "fullscreen" ? (
    <header class="relative h-screen min-h-[700px] flex items-center justify-center overflow-hidden clip-slant-bottom -mt-20">
      <div class="absolute inset-0 z-0">
        <img
          alt={imageAlt}
          class="w-full h-full object-cover brightness-[0.7] contrast-125"
          src={image}
        />
        {video && (
          <video
            autoplay
            muted
            playsinline
            loop
            class="absolute inset-0 w-full h-full object-cover brightness-[0.7] contrast-125"
            role="presentation"
          >
            <source src={video} type="video/mp4" />
          </video>
        )}
      </div>
      <div class="absolute inset-0 z-10 bg-forest-dark/40 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-30" />
      <div class="relative z-20 container mx-auto px-4 text-center">
        {badge && (
          <div class="inline-block mb-4 px-4 py-1 bg-primary text-black font-bold text-xs uppercase tracking-[0.2em] rounded-full rotate-2 transform border-2 border-black">
            {badge}
          </div>
        )}
        <h1 class="text-5xl md:text-7xl lg:text-8xl font-bold text-white leading-none tracking-tighter mb-6 drop-shadow-2xl uppercase">
          <Fragment set:html={title} />
          {titleAccent && (
            <>
              <br />
              <span class="text-primary italic relative inline-block">
                {titleAccent}
                <svg
                  class="absolute w-full h-3 -bottom-1 left-0 text-white opacity-80"
                  fill="none"
                  viewBox="0 0 200 9"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.00025 6.99999C18.4924 3.00001 77.5002 -3.49997 198 2.50001"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-width="3"
                  />
                </svg>
              </span>
            </>
          )}
        </h1>
        <p class="text-xl md:text-2xl text-gray-200 max-w-2xl mx-auto mb-10 font-medium">
          {subtitle}
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <a
            href={ctaHref}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-3 bg-primary hover:bg-white text-black font-bold text-lg px-10 py-4 rounded-xl shadow-[4px_4px_0px_0px_rgba(34,81,51,1)] hover:shadow-[2px_2px_0px_0px_rgba(34,81,51,1)] hover:translate-x-[2px] hover:translate-y-[2px] transition-all border-2 border-black uppercase tracking-widest"
          >
            <span class="material-icons text-2xl">calendar_today</span>
            {ctaText}
          </a>
        </div>
      </div>
    </header>
  ) : (
    <header class="relative min-h-[500px] sm:min-h-[600px] lg:min-h-[70vh] -mt-20 overflow-hidden">
      {/* Background image - full coverage */}
      <div class="absolute inset-0 z-0">
        <img
          alt={imageAlt}
          class="w-full h-full object-cover"
          src={image}
        />
      </div>

      {/* Mobile overlay - gradient from bottom */}
      <div class="absolute inset-0 z-10 lg:hidden bg-gradient-to-t from-forest-dark/90 via-forest-dark/40 to-transparent" />

      {/* Desktop diagonal overlay */}
      <div
        class:list={[
          "hero-split-overlay absolute inset-0 z-10 hidden lg:block",
          splitPosition === "right" ? "hero-split-right" : "hero-split-left"
        ]}
      />

      {/* Content */}
      <div class="absolute inset-0 z-20 pt-20">
        <div
          class:list={[
            "h-full flex items-end lg:items-center px-6 sm:px-12 lg:px-16 pb-10 sm:pb-16",
            splitPosition === "right" && "lg:justify-end"
          ]}
        >
          <div class:list={[
            "w-full max-w-xl",
            splitPosition === "right" && "lg:text-right"
          ]}>
            <h1 class="text-3xl sm:text-4xl lg:text-6xl font-bold text-white leading-none tracking-tight mb-4 sm:mb-6 uppercase drop-shadow-xl">
              <Fragment set:html={title} />
              {titleAccent && (
                <>
                  <br />
                  <span class="text-primary italic relative inline-block mt-2">
                    {titleAccent}
                    <svg
                      class="absolute w-full h-3 -bottom-1 left-0 text-white opacity-80"
                      fill="none"
                      viewBox="0 0 200 9"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M2.00025 6.99999C18.4924 3.00001 77.5002 -3.49997 198 2.50001"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-width="3"
                      />
                    </svg>
                  </span>
                </>
              )}
            </h1>
            <p class="text-base sm:text-lg lg:text-xl text-gray-200 leading-relaxed font-light drop-shadow-lg mb-6">
              {subtitle}
            </p>
            <a
              href={ctaHref}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-block bg-primary hover:bg-white text-black font-bold text-base sm:text-lg px-8 py-4 rounded-xl shadow-brutal hover:shadow-brutal-sm hover:translate-x-[2px] hover:translate-y-[2px] transition-all border-2 border-black uppercase tracking-wider"
            >
              {ctaText}
            </a>
          </div>
        </div>
      </div>
    </header>

    <style>
      .hero-split-left {
        clip-path: polygon(0 0, 60% 0, 50% 100%, 0% 100%);
        background: linear-gradient(to right, rgba(34,81,51,0.85) 0%, rgba(34,81,51,0.6) 60%, rgba(34,81,51,0.25) 100%);
      }
      .hero-split-right {
        clip-path: polygon(50% 0, 100% 0, 100% 100%, 40% 100%);
        background: linear-gradient(to left, rgba(34,81,51,0.85) 0%, rgba(34,81,51,0.6) 60%, rgba(34,81,51,0.25) 100%);
      }
    </style>
  )
}
