---
import Base from "../layouts/Base.astro";
import HeroSection from "../components/HeroSection.astro";
import { Image } from "astro:assets";

import sellaImg from "../assets/images/actividades/descenso-sella-hero.webp";
import barranquismoImg from "../assets/images/actividades/barranquismo-3.webp";
import lagosImg from "../assets/images/actividades/lagos-covadonga.jpg";

const base = import.meta.env.BASE_URL.replace(/\/$/, '');

const actividades = [
  {
    title: "Descenso del Sella",
    tagline: "La aventura estrella de Asturias",
    description:
      "15 km en canoa entre Arriondas y Ribadesella, rodeado de los paisajes de los Picos de Europa.",
    price: "25",
    duration: "4 - 4.5h",
    difficulty: "Baja",
    icon: "kayaking",
    href: `${base}/descenso-del-sella`,
    image: sellaImg,
    alt: "Descenso del Sella en canoa",
    rotation: "-rotate-2",
    hoverRotation: "hover:rotate-0",
  },
  {
    title: "Barranquismo",
    tagline: "Diversion en estado puro",
    description:
      "Saltos, toboganes y rappel por los barrancos asturianos. 4 niveles para todos los publicos.",
    price: "45",
    duration: "~4h",
    difficulty: "Todos los niveles",
    icon: "terrain",
    href: `${base}/barranquismo`,
    image: barranquismoImg,
    alt: "Barranquismo en Asturias",
    rotation: "rotate-1",
    hoverRotation: "hover:rotate-0",
  },
  {
    title: "Lagos de Covadonga",
    tagline: "Descubre un paraiso",
    description:
      "Visita guiada al Santuario y los lagos Enol y Ercina. Historia, leyendas y naturaleza.",
    price: "25",
    duration: "~3.5h",
    difficulty: "Sin dificultad",
    icon: "landscape",
    href: `${base}/visita-lagos`,
    image: lagosImg,
    alt: "Lagos de Covadonga en los Picos de Europa",
    rotation: "-rotate-1",
    hoverRotation: "hover:rotate-0",
  },
];
---

<Base title="Inicio">
  <!-- Hero -->
  <HeroSection
    title="RUMBO HACIA"
    titleAccent="EXPERIENCIAS INOLVIDABLES"
    subtitle="Turismo activo en el corazon de Asturias"
    image="https://lh3.googleusercontent.com/aida-public/AB6AXuCHo8H1YDDwVY_nHJkFtZ53bFQQpLxkrW92Y2pGZUpGCnffoA9yJSLdHeZmwzdciywYZ-dnUaZuxzLGj6V_Eifq1oIEvEX4oaGTY4Z93IsOeDhETmFupB03ptakbfIcOWN7A3zujNp2lDN3c58WABsY0H-FcyhZMhh_snIIfBLS3Kmnk7JYEg7ZXIzJnCxmnMs8GssiiosuGOYv5rZXvUrwa4XNndWz6RfNCQU6iWBRK2hFWN-MLFYuSEJpzvzCdPPLAT2suj8f-g"
    imageAlt="Descenso del Sella en canoa rodeado de naturaleza asturiana"
    video="https://rumbonorteasturias.com/wp-content/uploads/2025/05/descenso_sella_rumbo_norte_final.mp4"
    ctaText="Reserva ya!"
  />

  <!-- Elige tu aventura -->
  <section class="py-24 md:py-32 bg-stone-gray relative overflow-hidden">
    <!-- Textura de fondo sutil -->
    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-10 pointer-events-none"></div>

    <div class="max-w-7xl mx-auto px-4 relative z-10">
      <!-- Encabezado -->
      <div class="text-center mb-16 md:mb-20">
        <span
          class="text-primary font-bold tracking-widest uppercase text-sm block mb-4 scroll-animate"
          data-animation="fadeInUp"
        >
          Turismo activo en Arriondas
        </span>
        <h2
          class="text-4xl md:text-6xl lg:text-7xl font-bold uppercase tracking-tight scroll-animate"
          data-animation="fadeInUp"
          data-delay="100"
        >
          Elige tu <span class="text-primary italic relative inline-block">aventura
            <svg
              class="absolute w-full h-3 -bottom-1 left-0 text-forest-dark opacity-60"
              fill="none"
              viewBox="0 0 200 9"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M2.00025 6.99999C18.4924 3.00001 77.5002 -3.49997 198 2.50001"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-width="3"
              />
            </svg>
          </span>
        </h2>
        <p
          class="text-lg md:text-xl text-gray-600 font-light mt-6 max-w-2xl mx-auto leading-relaxed scroll-animate"
          data-animation="fadeInUp"
          data-delay="200"
        >
          Tres experiencias unicas en el corazon de los Picos de Europa.
          Elige la tuya y empieza la aventura.
        </p>
      </div>

      <!-- Grid de polaroids -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-6 lg:gap-10 max-w-6xl mx-auto items-start">
        {actividades.map((act, i) => (
          <a
            href={act.href}
            class:list={[
              "polaroid-card group block bg-white p-3 md:p-4 rounded-lg transition-all duration-500 ease-out cursor-pointer scroll-animate shadow-lg hover:shadow-2xl",
              act.rotation,
              act.hoverRotation,
              "hover:scale-[1.03] hover:z-10 hover:-translate-y-2",
            ]}
            data-animation="fadeInUp"
            data-delay={`${(i + 1) * 100}`}
          >
            <!-- Foto -->
            <div class="relative aspect-[3/4] overflow-hidden rounded bg-gray-100">
              <Image
                src={act.image}
                alt={act.alt}
                class="w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-110"
                widths={[400, 600]}
                sizes="(max-width: 768px) 90vw, 33vw"
              />

              <!-- Overlay gradiente al hover -->
              <div class="absolute inset-0 bg-gradient-to-t from-forest-dark/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>

              <!-- Badge precio -->
              <div class="absolute top-3 right-3 bg-white/90 backdrop-blur-sm text-forest-dark font-bold text-sm px-3 py-1.5 rounded-full shadow-md">
                desde {act.price}â‚¬
              </div>

              <!-- Info rapida en hover -->
              <div class="absolute bottom-0 left-0 right-0 p-4 translate-y-full group-hover:translate-y-0 transition-transform duration-500 ease-out">
                <div class="flex items-center gap-4 text-white text-xs font-bold uppercase tracking-wider">
                  <span class="flex items-center gap-1">
                    <span class="material-symbols-outlined text-sm">schedule</span>
                    {act.duration}
                  </span>
                  <span class="flex items-center gap-1">
                    <span class="material-symbols-outlined text-sm">signal_cellular_alt</span>
                    {act.difficulty}
                  </span>
                </div>
              </div>
            </div>

            <!-- Caption estilo polaroid -->
            <div class="pt-4 pb-2 px-1">
              <div class="flex items-start justify-between gap-2 mb-2">
                <h3 class="text-lg md:text-xl font-bold uppercase tracking-tight leading-tight group-hover:text-forest-dark transition-colors">
                  {act.title}
                </h3>
                <span class="material-symbols-outlined text-primary text-2xl shrink-0 group-hover:translate-x-1 transition-transform duration-300">
                  arrow_forward
                </span>
              </div>
              <p class="text-primary font-bold text-xs uppercase tracking-widest mb-2">
                {act.tagline}
              </p>
              <p class="text-gray-500 text-sm font-light leading-relaxed">
                {act.description}
              </p>
            </div>
          </a>
        ))}
      </div>

      <!-- CTA secundario -->
      <div
        class="text-center mt-16 scroll-animate"
        data-animation="fadeInUp"
        data-delay="300"
      >
        <p class="text-gray-500 font-medium mb-4 uppercase tracking-widest text-sm">
          No puedes elegir solo una?
        </p>
        <a
          href={`${base}/packs`}
          class="inline-flex items-center gap-3 bg-forest-dark hover:bg-primary text-white hover:text-black font-bold text-base px-8 py-4 rounded-xl shadow-brutal hover:shadow-brutal-sm hover:translate-x-[2px] hover:translate-y-[2px] transition-all border-2 border-black uppercase tracking-wider"
        >
          <span class="material-symbols-outlined">backpack</span>
          Descubre nuestros packs
        </a>
      </div>
    </div>
  </section>

  <!-- Encuentranos -->
  <section class="py-24 md:py-32 bg-primary relative overflow-hidden">
    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-10 pointer-events-none"></div>

    <div class="max-w-6xl mx-auto px-4 relative z-10">
      <div
        class="bg-white rounded-2xl shadow-2xl overflow-hidden scroll-animate"
        data-animation="fadeInUp"
      >
        <div class="grid grid-cols-1 lg:grid-cols-12">
          <!-- Info -->
          <div class="lg:col-span-5 p-8 md:p-12 flex flex-col justify-center">
            <h2 class="text-3xl md:text-4xl font-bold leading-tight mb-4">
              ENCUENTRANOS EN <br />
              <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-forest-dark">
                LA NATURALEZA
              </span>
            </h2>
            <p class="text-gray-500 font-light leading-relaxed mb-8">
              Nuestra base esta en Arriondas, la puerta de entrada a los Picos de Europa. Ven a vernos y empieza tu aventura.
            </p>

            <ul class="space-y-4">
              <li>
                <a
                  href="https://maps.google.com/?q=43.391094,-5.185168"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="flex items-center gap-3 group/link"
                >
                  <span class="w-10 h-10 rounded-full bg-primary/15 flex items-center justify-center shrink-0 group-hover/link:bg-primary/25 transition-colors">
                    <span class="material-symbols-outlined text-primary text-xl">location_on</span>
                  </span>
                  <span class="text-gray-700 font-medium group-hover/link:text-forest-dark transition-colors">
                    Arriondas, Asturias
                  </span>
                </a>
              </li>
              <li>
                <a
                  href="tel:+34648951599"
                  class="flex items-center gap-3 group/link"
                >
                  <span class="w-10 h-10 rounded-full bg-primary/15 flex items-center justify-center shrink-0 group-hover/link:bg-primary/25 transition-colors">
                    <span class="material-symbols-outlined text-primary text-xl">phone</span>
                  </span>
                  <span class="text-gray-700 font-medium group-hover/link:text-forest-dark transition-colors">
                    +34 648 951 599
                  </span>
                </a>
              </li>
              <li>
                <a
                  href="mailto:info@rumbonorteasturias.com"
                  class="flex items-center gap-3 group/link"
                >
                  <span class="w-10 h-10 rounded-full bg-primary/15 flex items-center justify-center shrink-0 group-hover/link:bg-primary/25 transition-colors">
                    <span class="material-symbols-outlined text-primary text-xl">mail</span>
                  </span>
                  <span class="text-gray-700 font-medium group-hover/link:text-forest-dark transition-colors">
                    info@rumbonorteasturias.com
                  </span>
                </a>
              </li>
            </ul>
          </div>

          <!-- Mapa -->
          <div class="lg:col-span-7 min-h-[350px] lg:min-h-[450px] relative">
            <div id="find-us-map" class="w-full h-full absolute inset-0"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Leaflet -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script is:inline src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script is:inline>
    document.addEventListener("DOMContentLoaded", function () {
      var mapEl = document.getElementById("find-us-map");
      if (!mapEl) return;

      var map = L.map(mapEl, {
        center: [43.391094, -5.185168],
        zoom: 12,
        scrollWheelZoom: false,
        attributionControl: false,
      });

      L.tileLayer(
        "https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}{r}.png",
        {
          maxZoom: 18,
          attribution: '&copy; <a href="https://stadiamaps.com/">Stadia</a> &copy; <a href="https://stamen.com/">Stamen</a> &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="https://openstreetmap.org/">OSM</a>',
        }
      ).addTo(map);

      var markerIcon = L.divIcon({
        html: '<div style="width:20px;height:20px;background:#8cb950;border:3px solid white;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.3);"></div>',
        iconSize: [20, 20],
        iconAnchor: [10, 10],
        className: "",
      });

      L.marker([43.391094, -5.185168], { icon: markerIcon }).addTo(map);

      // Habilitar scroll zoom solo tras click en el mapa
      map.on("click", function () {
        map.scrollWheelZoom.enable();
      });
    });
  </script>
</Base>
